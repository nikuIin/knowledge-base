[](Работа%20с%20пользователями%20RabbitMQ,%20права%20пользователей.md)[](Работа%20с%20пользователями%20RabbitMQ,%20права%20пользователей.md)[[RabbitMQ.canvas|RabbitMQ]]

Цель `RabbitMQ` — реализация сложной асинхронной очереди сообщений и передачи их между компонентами системы

Когда система разрастается, появляется все больше компонентов, которые общаются между собой. Сообщений тысячи и приходится разработать единое решение их передачи. Нужно такое, которые не будет завязываться на скорости самого медленного компонента системы. На примере: мы хотим при авторизации пользователя запрашивать код подтверждение, который высылается на его почту. Процесс запроса кода — это вызов другой подсистемы, он может занять некоторое время и мы не очень хотим, чтобы пользователь сидел в анимации прогрузки страницы с вводом кода, а сразу на неё перешёл. То есть операции должны проходить **асинхронно**. Такое реализует сервис `RabbitMQ`.


## Устройство `RabbitMQ`

По-простому `RabbitMQ` можно приставить как:
- `publisher` — то, что принимает сообщение
- `queue` — очередь, то, что хранит сообщение
- `subscribers` — подписчики, те, кто получают сообщения

Прелесть и нужда очереди в том (одна из причин), что, если `subscriber` сломается, то сообщения никуда не денутся и будут храниться, пока `subcriber` не будет восстановлен.

## Схема работы `RabbitMQ`

1. Сообщение попадает в систему (а именно `producer` (отправитель) кладёт сообщение в `exchange` (обменник, единая точка входа сообщений в `rabitmq`))
2. `Exchange` анализирует сообщение и в зависимости от `binding` (биндинг, связь сообщения с очередью) отправляют в соответсвующую `queue`
3. Получатель (`consumer`) подписывается на определённую очередь и начинает получать сообщения из неё
4. `Consumer` обрабатывает сообщение и подтверждает его получения, тем самым исключая её из очереди \*
\* Если `consumer` не подтвердил получение в течении определенного времени, то сообщение из очереди не уходит и отправляется ему заново.

## Работа CLI `RabbitMQ`

В `RabbitMQ` есть справочник к каждой команде

```bash
./rabbitmqctl help <interesting_command>
```
