[[Pytest Тестирование.canvas|Pytest Тестирование]]
[[4 столпа хорошего теста]]
[[Книга «Принципы Unit-тестирования» Владимир Хориков]]

Тесты должны быть похожи на клиента, — проверять только нужные ему данные и не привязываться к имплементации. Клиенту важно, каким образом был построен `HTML`, который он видит, в какую таблицу отправил код запрос на выборку? В каком порядке все произошло? **Нет!**

И вашим тестам должно быть глубоко плевать, что и как произошло в методе. Какие приватные вызвались, в каком порядке все произошло. Вам важно только одно — **результат**, так и проверять только результат и ваши тесты будут максимально устойчивы к рефакторингу. Почему «максимально устойчивы», а не просто «устойчивы»? Потому что, если вы измените, допустим параметры `sut` (system under test) метода, то у вас возникнет ошибка компиляции:) А это все та же ошибка. 

Если же вы будете привязывать свой тест к ходу программы, проверять, в каком порядке вызываются методы и все остальное, то готовьтесь на каждом рефакторинге переписывать тесты, ни 1, ни 2, вероятнее всего десятки. Я вам гарантирую, что после 2-3 итераций вы просто будете скипать эти падающие тесты или откажитесь от рефакторинга кода. И то, и другое **максимально плохо!**